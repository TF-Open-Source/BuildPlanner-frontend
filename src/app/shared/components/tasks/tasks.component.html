<section class="tasks-container">
  <h1 class="page-title">{{ 'TASKS.BREADCRUMB' | translate }}</h1>

  <div class="tasks-content">
    <div class="toolbar">
      <span class="sort-label">{{ 'TASKS.SORT_BY' | translate }}</span>
      <button mat-icon-button (click)="ordenarPorFecha()" aria-label="Ordenar por fecha">
        <mat-icon>calendar_today</mat-icon>
      </button>
      <button mat-icon-button (click)="ordenarPorPrioridad()" aria-label="Ordenar por prioridad">
        <mat-icon>priority_high</mat-icon>
      </button>
    </div>

    <table mat-table [dataSource]="tareas" class="mat-elevation-z1">
      <!-- N° -->
      <ng-container matColumnDef="numero">
        <th mat-header-cell *matHeaderCellDef> N° </th>
        <td mat-cell *matCellDef="let tarea; let i = index"> {{ i + 1 }} </td>
      </ng-container>

      <!-- Tarea -->
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef>{{ 'TASKS.TASK' | translate }}</th>
        <td mat-cell *matCellDef="let tarea">
          {{ 'TASKS.NAMES.' + tarea.nombre | translate }}
        </td>
      </ng-container>

      <!-- Fecha Límite -->
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef>{{ 'TASKS.DUE_DATE' | translate }}</th>
        <td mat-cell *matCellDef="let tarea">{{ tarea.fechaLimite }}</td>
      </ng-container>

      <!-- Prioridad -->
      <ng-container matColumnDef="prioridad">
        <th mat-header-cell *matHeaderCellDef>{{ 'TASKS.PRIORITY' | translate }}</th>
        <td mat-cell *matCellDef="let tarea">{{ tarea.prioridad }}</td>
      </ng-container>

      <!-- Estado -->
      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef>{{ 'TASKS.STATUS' | translate }}</th>
        <td mat-cell *matCellDef="let tarea">
          <select [(ngModel)]="tarea.estado">
            <option value="PENDING">{{ 'TASKS.STATUS_VALUES.PENDING' | translate }}</option>
            <option value="IN_PROGRESS">{{ 'TASKS.STATUS_VALUES.IN_PROGRESS' | translate }}</option>
            <option value="COMPLETED">{{ 'TASKS.STATUS_VALUES.COMPLETED' | translate }}</option>
          </select>
        </td>
      </ng-container>

      <!-- Problemas -->
      <ng-container matColumnDef="problemas">
        <th mat-header-cell *matHeaderCellDef>{{ 'TASKS.ISSUES' | translate }}</th>
        <td mat-cell *matCellDef="let tarea">
          <button mat-icon-button aria-label="report issue">
            <mat-icon>report_problem</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Descripción -->
      <ng-container matColumnDef="descripcion">
        <th mat-header-cell *matHeaderCellDef>{{ 'TASKS.DETAILS' | translate }}</th>
        <td mat-cell *matCellDef="let tarea">
          <a mat-icon-button [routerLink]="['/task-details', tarea.id]" aria-label="ver detalle">
            <mat-icon>search</mat-icon>
          </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnas"></tr>
      <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
    </table>
  </div>
</section>
